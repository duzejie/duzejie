
-   什么是 SPICE？  

    -   SPICE（Simulation program with integrated circuit emphasis）是最为普遍的电路级模拟程序，各软件厂家提供了 Vspice、Hspice、Pspice 等不同版本 spice 软件，其仿真核心大同小异，都是采用了由美国加州 Berkeley 大学开发的 spice 模拟算法。  

    -   电路系统的设计人员有时需要对系统中的部分电路作电压与电流关系的详细分析，此时需要做晶体管级仿真（电路级），这种仿真算法中所使用的电路模型都是最基本的元件和单管。仿真时按时间关系对每一个节点的 I/V 关系进行计算。这种仿真方法在所有仿真手段中是最精确的，但也是最耗费时间的。  

    -   Spice 是一种功能强大的通用模拟电路仿真器，已经具有几十年的历史了，该程序主要用于集成电路的电路分析程序中，Spice 的网表格式变成了通常模拟电路和晶体管级电路描述的标准，其第一版本于 1972 年完成，是用 Fortran 语言写成的，1975 年推出正式实用化版本，1988 年被定为美国国家工业标准，主要用于 IC，模拟电路，数模混合电路，电源电路等电子系统的设计和仿真。由于 Spice 仿真程序采用完全开放的政策，用户可以按自己的需要进行修改，加之实用性好，迅速得到推广，已经被移植到多个操作系统平台上。  

    -   SPICE 广泛应用在仿真模拟电路（例如运放 OpAmp，能隙基准稳压电源 BandgapReference，数模/模数转换 AD/DA 等），混合信号电路（例如锁相环 PLL，存储器 SRAM/dRAM，高速输入/输出接口 high-speedI/O），精确数字电路（例如延时，时序，功耗，漏电流等），建立 SoC 的时序及功耗单元库，分析系统级的信号完整性，等等。作为最早的电子设计自动化软件，它今天仍然是最重要的软件之一。可以说，没有 SPICE，就没有电子设计自动化这个产业，也就没有今天的半导体工业。  

    -   SPICE 最初是用来做小型电路仿真的。电路中的元器件数也就几十最多到几百个。随着电路规模越做越大，电路种类越来越多，人们会问：SPICE 能不能跑得更快一些，能运行的电路更大一些？自然而然的，SPICE 的变种就出现了。  

        -   快速仿真（fastSPICE）：因为 SPICE 是把整个电路放到一个矩阵中来解。人们就想能不能把电路分成小块单独解，然后再把各块之间联接起来，这样不就快了吗？的确，对数字电路，确实可以用分割的方法。因为数字电路的信号是有方向的，我们可以在没有直流通路的地方把它分开（例如在两个串联的反相器中间）。另外就是数字信号是离散的，我们可以把它分成几段。分的段越大，时间步长也就能越大，需要解的次数就少了（当然结果也就没那么精确了）。还有就是器件模型。我们前面讲过如今的 mosfet 模型非常复杂，要花很多时间去算，那能不能把它简化呢？可以。事实证明对数字电路以及数模混合电路（像 PLL，memory，serdes）来说，用表格模型（tablemodel）来代替复杂的方程模型是个不错的选择。通过这些简化，快速仿真可以比原来的 SPICE 快几十到上百倍，而精度是在 SPICE 的 5-10%之内。像 EPIC 的 PowerMill（后来成为 Synopsys 的 Nanosim），Anagram 的 ADM（后来成为 Avant! 的 StarSim），Celestry（后来成为 Cadence）的 Ultrasim，Nassda（后来成为 Synopsys）的 HSIM，等等。最近比较流行的是 Magma（现在是 Synopsys）的 Finesim，BDA（现在是 Mentor）的 AFS，Proplus 的 Nanospice。  

        -   数模混合仿真：当一个系统中既有模拟电路，又有数字电路，人们自然就会想到把 SPICE 和数字仿真器（如 Synopsys 的 VerilogVCS，Cadence 的 NC，Mentor 的 Modelsim）联在一起运行。SPICE 去算模拟电路部分，数字仿真器去算数字电路部分，它们之间用数模／模数转换器（AD/DA）连接。注意这种运行方式跟上面的快速仿真不同。这样的混合仿真需要两个仿真器。但这样的构架有缺点。主要的问题是数模转换没有一个标准。市面上有很多 SPICE 以及 Verilog 仿真工具，每一个工具的转换界面都不一样，这就造成混合仿真的界面非常复杂。因此，最近发展的混合仿真都采用数模一体化的构架，大大简化了转换界面，而且用户只需在一个环境下就可进行混合仿真。这样的工具有 Cadence 的 Virtuoso-AMS，Synopsys 的 HSIM-plusHDL，Silvaco 的 Harmony，华大的 Aeolus-ADS 等。  

        -   SPICE 的扩展应用：虽说 SPICE 是针对集成电路（IC）开发的，但它的应用已扩展到系统级（systemlevel），主要是电路板（PCB）级的仿真。那系统级仿真与集成电路仿真有何区别呢？它们不都是电路吗？呵呵，没错，它们都是电路，但区别还是蛮大的。主要是它们的规模与尺寸的不同。我们知道，集成电路是集成在芯片上的。其器件尺寸现在已做到纳米级。而系统级的尺寸还在毫米，厘米，甚至米的数量级。学过电磁的同学都知道，当器件的尺寸大于信号波长的时候，就要考虑分布的场效应了。拿一段导线做例子。一段在芯片上的导线，你可以把它看作一个电阻。而一段电路板上的导线，你就必须用传输线 (transmission line)来代表它，否则误差就太大了。如果信号的频率再高，那就要用 S 参数了（S-parameter）。由此，电路仿真发展出一大分支，这就是所谓的“信号完整性”工具。像 Agilent 的 ADS，Mentor 的 HyperLynx，以及 Cadence 的 OrCAD 和 Allegro。  
