
## Life Time of Model – 模型生命周期管理

训练任务：数据中心中更像是传统的批处理任务，需要执行数小时，数天才能完成，其一般配置较大的批尺寸追求较大的吞吐，将模型训练达到指定的准确度或错误率。
推理任务：执行 7 X 24 的服务，其常常受到响应延迟的约束，配置的批尺寸更小，模型已经稳定一般不再被训练。

需要模型版本管理的原因 
- 每隔一段时间训练出的新版本模型替换线上模型，但是可能存在缺陷
- 如果新版本模型发现缺陷需要回滚
模型生命周期管理
- 金丝雀(Canary)策略
- 回滚(Rollback)策略

![[图片20230604157642.png]]


  
#### 金丝雀 Canary 策略
  
1. 当获得一个新模型版本，当前服务模型成为 second-newest，用户可以选择同时保持这两个版本
2. 将所有推理请求流量发送到当前两个版本，比较它们的效果
3. 一旦对最新版本达标，用户就可以切换到仅该版本
4. 方法需要更多的高峰资源，避免将用户暴露于缺陷模型

  
#### 回滚 Rollback 策略
1. 如果在当前的主要服务版本上检测到缺陷，则用户可以请求切换到特定的较旧版本
2. 卸载和装载的顺序应该是可配置的
3. 当问题解决并且获取到新的安全版本模型时，从而结束回滚
